(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{521:function(t,e,a){"use strict";a.r(e);var s=a(6),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"_1-jdbc-常用接口和类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-jdbc-常用接口和类"}},[t._v("#")]),t._v(" 1. JDBC 常用接口和类")]),t._v(" "),a("h3",{attrs:{id:"_1-1-drivermanager"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-drivermanager"}},[t._v("#")]),t._v(" 1.1 DriverManager")]),t._v(" "),a("ul",[a("li",[t._v("负责管理 JDBC 驱动的服务类，程序中主要的功能是获取连接数据库的 Connection 对象。")])]),t._v(" "),a("h3",{attrs:{id:"_1-2-connection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-connection"}},[t._v("#")]),t._v(" 1.2 Connection")]),t._v(" "),a("ul",[a("li",[t._v("代表一个数据库连接对象，要访问数据库，首先需要获得数据库连接。")]),t._v(" "),a("li",[t._v("同时，Connection 接口提供了获取执行 SQL 语句的 Statement 和 PreparedStatement 对象，以及控制事物（Transaction）的方法。")])]),t._v(" "),a("h3",{attrs:{id:"_1-3-statement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-statement"}},[t._v("#")]),t._v(" 1.3 Statement")]),t._v(" "),a("ul",[a("li",[t._v("用于执行 SQL 语句的接口，同时支持执行 DDL（Data Definition Language），DCL（Data Control Language），DML（Data Manipulation Language）语句。")]),t._v(" "),a("li",[t._v("我们常用的 CRUD 操作是 DML 语句。")])]),t._v(" "),a("h3",{attrs:{id:"_1-4-preparedstatement"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-preparedstatement"}},[t._v("#")]),t._v(" 1.4 PreparedStatement")]),t._v(" "),a("ul",[a("li",[t._v("Statement 的子接口，代表一个预编译的 Statement 对象。")]),t._v(" "),a("li",[t._v("所谓预编译，就是事先将 SQL 传入到 PreparedStatement 对象中，不必每一次在执行的时候加载 SQL 语句，所以在性能上会有所提高。")]),t._v(" "),a("li",[t._v("常用来执行带参数的 SQL 语句。")])]),t._v(" "),a("h3",{attrs:{id:"_1-5-resultset"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-resultset"}},[t._v("#")]),t._v(" 1.5 ResultSet")]),t._v(" "),a("ul",[a("li",[t._v("SQL 语句执行后的结果集对象。")]),t._v(" "),a("li",[t._v("当 Statement 或者其子接口，执行的是一个查询的 DML 语句，其返回就会是一个 ResultSet 对象。")]),t._v(" "),a("li",[t._v("ResultSet 中包含访问查询结果的方法。")])]),t._v(" "),a("h2",{attrs:{id:"_2-jdbc编程步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-jdbc编程步骤"}},[t._v("#")]),t._v(" 2. JDBC编程步骤")]),t._v(" "),a("ul",[a("li",[t._v("加载数据库驱动。")]),t._v(" "),a("li",[t._v("通过 DriverManager 获取数据库连接 Connection。")]),t._v(" "),a("li",[t._v("通过 Connection 对象创建 Statement 对象（Statement，PreparedStatement，CallableStatement）。")]),t._v(" "),a("li",[t._v("外部传入 SQL 语句，使用 Statement 执行 SQL。")]),t._v(" "),a("li",[t._v("如果 SQL 是一个查询语句，操作结果集 ResultSet。")]),t._v(" "),a("li",[t._v("回收数据库资源（实现 Closeable/AutoCloseable 的 Connection，Statement 和 ResultSet）。")])]),t._v(" "),a("h3",{attrs:{id:"_2-1-加载数据库驱动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-加载数据库驱动"}},[t._v("#")]),t._v(" 2.1 加载数据库驱动")]),t._v(" "),a("ul",[a("li",[t._v("通常来说，JDBC 使用 Class 类的 forName() 静态方法来加载驱动，需要输入数据库驱动代表的字符串。")]),t._v(" "),a("li",[t._v("例如：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('加载 MySQL 驱动：\n        Class.forName("com.mysql.jdbc.Driver");\n\n加载 Oracle 驱动：\n        Class.forName("oracle.jdbc.driver.OracleDriver");\n\n加载 SQLite 驱动：\n        Class.forName("org.sqlite.JDBC");\n')])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br")])]),a("ul",[a("li",[t._v("这些数据库驱动的字符串，可以在数据库厂商提供的驱动（jar 包）找到，例如我使用的 SQLite：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("<dependency>\n   <groupId>org.xerial</groupId>\n   <artifactId>sqlite-jdbc</artifactId>\n   <version>3.8.11.2</version>\n</dependency>\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("ul",[a("li",[t._v("在下面这个文件内，就存放着该驱动的字符串：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("org\\xerial\\sqlite-jdbc\\3.8.11.2\\sqlite-jdbc-3.8.11.2.jar!\\META-INF\\services\\java.sql.Driver\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-2-获取数据库连接"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-获取数据库连接"}},[t._v("#")]),t._v(" 2.2 获取数据库连接")]),t._v(" "),a("ul",[a("li",[t._v("DriverManagement 提供了一系列的方法，来获取 Connection，每一个 Connection 代表一个对数据库的物理连接：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("public static Connection getConnection(String url, java.util.Properties info) throws SQLException\npublic static Connection getConnection(String url, String user, String password) throws SQLException\npublic static Connection getConnection(String url) throws SQLException\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("ul",[a("li",[t._v("对于大多数的数据而言，获取 Connection 需要数据库 URL，登陆数据库的用户和密码。")]),t._v(" "),a("li",[t._v("数据库 URL 遵循如下写法：")])]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("jdbc:subprotocol:other stuff\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("上面的写法中，jdbc 是固定的，subprotocol 指特定的数据库驱动协议，而后面的 other 和 stuff 则不固定，不同的数据库写法也存在差异。")]),t._v(" "),a("li",[t._v("特定的数据库 URL 写法，在 JDBC 驱动文档中会提供。")])])])}),[],!1,null,null,null);e.default=n.exports}}]);